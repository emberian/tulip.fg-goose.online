{% extends "zerver/base.html" %}
{% set entrypoint = "theater" %}

{% block title %}
<title>Theater - {{ user_profile.realm.name }}</title>
{% endblock %}

{% block meta_viewport %}
<!-- WCAG 1.4.4: Allow user zooming up to 500%, viewport-fit=cover for safe areas on notched devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
{% endblock %}

{% block customhead %}
<style>
    /* Critical CSS for loading state */
    body {
        margin: 0;
        background-color: #0d0d0f;
        color: #e8e6e3;
    }
    #theater-loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        font-family: 'Source Serif Pro', Georgia, serif;
    }
    #theater-loading p {
        font-size: 1.2rem;
        font-style: italic;
        opacity: 0.7;
    }
    .theater-curtain {
        position: relative;
        width: 60px;
        height: 60px;
        margin-bottom: 1rem;
    }
    .theater-curtain::before,
    .theater-curtain::after {
        content: '';
        position: absolute;
        top: 0;
        width: 30px;
        height: 60px;
        background: linear-gradient(to bottom, #7b68ee, #5a4eb8);
        animation: curtain-wave 2s ease-in-out infinite;
    }
    .theater-curtain::before {
        left: 0;
        border-radius: 0 0 30px 0;
        transform-origin: top left;
    }
    .theater-curtain::after {
        right: 0;
        border-radius: 0 0 0 30px;
        transform-origin: top right;
        animation-delay: 0.2s;
    }
    @keyframes curtain-wave {
        0%, 100% { transform: scaleY(1); }
        50% { transform: scaleY(0.9); }
    }
</style>
{% endblock %}

{% block content %}
<div id="theater-loading" role="status" aria-live="polite" aria-label="Loading Theater Mode">
    <div class="theater-curtain" aria-hidden="true"></div>
    <p>Preparing the stage...</p>
</div>
<div id="theater-app" role="application" aria-label="Theater Mode"></div>
{% endblock %}
